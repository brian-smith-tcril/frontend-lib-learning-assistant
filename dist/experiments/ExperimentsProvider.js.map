{"version":3,"file":"ExperimentsProvider.js","names":["_propTypes","_interopRequireDefault","require","_react","_modelStore","_auth","_reactSdk","_i18n","_optimizely","_context","_jsxRuntime","obj","__esModule","default","ExperimentsProvider","_ref","children","courseId","useContext","CourseInfoContext","userId","getAuthenticatedUser","optimizely","getOptimizely","enrollmentMode","useModel","jsx","OptimizelyProvider","user","id","toString","attributes","lms_language_preference","getLocale","lms_enrollment_mode","propTypes","PropTypes","node","isRequired","_default","exports"],"sources":["../../src/experiments/ExperimentsProvider.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { useContext } from 'react';\nimport { useModel } from '@src/generic/model-store'; // eslint-disable-line import/no-unresolved\nimport { getAuthenticatedUser } from '@edx/frontend-platform/auth';\nimport { OptimizelyProvider } from '@optimizely/react-sdk';\nimport { getLocale } from '@edx/frontend-platform/i18n';\n\nimport { getOptimizely } from '../data/optimizely';\nimport { CourseInfoContext } from '../context';\n\nconst ExperimentsProvider = ({ children }) => {\n  const { courseId } = useContext(CourseInfoContext);\n  const { userId } = getAuthenticatedUser();\n  const optimizely = getOptimizely();\n  const { enrollmentMode } = useModel('coursewareMeta', courseId);\n\n  return optimizely ? (\n    <OptimizelyProvider\n      optimizely={optimizely}\n      user={{\n        id: userId.toString(),\n        attributes: { lms_language_preference: getLocale(), lms_enrollment_mode: enrollmentMode },\n      }}\n    >\n      {children}\n    </OptimizelyProvider>\n  ) : (\n    children\n  );\n};\n\nExperimentsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default ExperimentsProvider;\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AACA,IAAAI,SAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;AAEA,IAAAM,WAAA,GAAAN,OAAA;AACA,IAAAO,QAAA,GAAAP,OAAA;AAA+C,IAAAQ,WAAA,GAAAR,OAAA;AAAA,SAAAD,uBAAAU,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AANM;;AAQrD,MAAMG,mBAAmB,GAAGC,IAAA,IAAkB;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAD,IAAA;EACvC,MAAM;IAAEE;EAAS,CAAC,GAAG,IAAAC,iBAAU,EAACC,0BAAiB,CAAC;EAClD,MAAM;IAAEC;EAAO,CAAC,GAAG,IAAAC,0BAAoB,EAAC,CAAC;EACzC,MAAMC,UAAU,GAAG,IAAAC,yBAAa,EAAC,CAAC;EAClC,MAAM;IAAEC;EAAe,CAAC,GAAG,IAAAC,oBAAQ,EAAC,gBAAgB,EAAER,QAAQ,CAAC;EAE/D,OAAOK,UAAU,gBACf,IAAAZ,WAAA,CAAAgB,GAAA,EAACpB,SAAA,CAAAqB,kBAAkB;IACjBL,UAAU,EAAEA,UAAW;IACvBM,IAAI,EAAE;MACJC,EAAE,EAAET,MAAM,CAACU,QAAQ,CAAC,CAAC;MACrBC,UAAU,EAAE;QAAEC,uBAAuB,EAAE,IAAAC,eAAS,EAAC,CAAC;QAAEC,mBAAmB,EAAEV;MAAe;IAC1F,CAAE;IAAAR,QAAA,EAEDA;EAAQ,CACS,CAAC,GAErBA,QACD;AACH,CAAC;AAEDF,mBAAmB,CAACqB,SAAS,GAAG;EAC9BnB,QAAQ,EAAEoB,kBAAS,CAACC,IAAI,CAACC;AAC3B,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAA3B,OAAA,GAEaC,mBAAmB","ignoreList":[]}